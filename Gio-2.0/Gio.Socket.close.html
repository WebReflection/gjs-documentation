<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Gio.Socket.prototype.close</title>
<link rel="stylesheet" type="text/css" href="C.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body><div class="page" role="main">
<div class="header"><div class="trails" role="navigation"><div class="trail">
<a class="trail" href="index.html" title="Gio">Gio</a> » <a class="trail" href="Gio.Socket.html" title="Gio.Socket">Gio.Socket</a> » </div></div></div>
<div class="body">
<div class="hgroup"><h1 class="title"><span class="title">Gio.Socket.prototype.close</span></h1></div>
<div class="region">
<div class="contents">
<div class="synopsis"><div class="inner"><div class="region"><div class="contents"><div class="code"><pre class="contents ">function close(): Boolean {
    // Gjs wrapper for g_socket_close()
}
  </pre></div></div></div></div></div>
<p class="p">Closes the socket, shutting down any active connection.</p>
<p class="p">Closing a socket does not wait for all outstanding I/O operations
to finish, so the caller should not rely on them to be guaranteed
to complete even if the close returns with no error.</p>
<p class="p">Once the socket is closed, all other operations will return
<span class="link"><a href="Gio.IOErrorEnum.html" title="Gio.IOErrorEnum">Gio.IOErrorEnum</a></span>.closed. Closing a socket multiple times will not
return an error.</p>
<p class="p">Sockets will be automatically closed when the last reference
is dropped, but you might want to call this function to make sure
resources are released as early as possible.</p>
<p class="p">Beware that due to the way that TCP works, it is possible for
recently-sent data to be lost if either you close a socket while the
<span class="link"><a href="../GLib-2.0/GLib.IOCondition.html" title="../GLib-2.0/GLib.IOCondition.html">GLib.IOCondition</a></span>.in condition is set, or else if the remote connection tries to
send something to you after you close the socket but before it has
finished reading all of the data you sent. There is no easy generic
way to avoid this problem; the easiest fix is to design the network
protocol such that the client will never send data "out of turn".
Another solution is for the server to half-close the connection by
calling <span class="link"><a href="Gio.Socket.shutdown.html" title="Gio.Socket.prototype.shutdown">Gio.Socket.prototype.shutdown</a></span> with only the @shutdown_write flag set,
and then wait for the client to notice this and close its side of the
connection, after which the server can safely call <span class="link"><a href="Gio.Socket.close.html" title="Gio.Socket.prototype.close">Gio.Socket.prototype.close</a></span>.
(This is what <span class="link"><a href="Gio.TcpConnection.html" title="Gio.TcpConnection">Gio.TcpConnection</a></span> does if you call
<span class="link"><a href="Gio.TcpConnection.set_graceful_disconnect.html" title="Gio.TcpConnection.prototype.set_graceful_disconnect">Gio.TcpConnection.prototype.set_graceful_disconnect</a></span>. But of course, this
only works if the client will close its connection after the server
does.)</p>
<p class="p">Since 2.22</p>
<div class="terms"><div class="inner"><div class="region"><dl class="terms">
<dt class="terms"><span class="code">Returns</span></dt>
<dd class="terms"><p class="p"><span class="code">true</span> on success, <span class="code">false</span> on error</p></dd>
</dl></div></div></div>
</div>
<div class="sect sect-links" role="navigation">
<div class="hgroup"></div>
<div class="contents"><div class="links guidelinks"><div class="inner">
<div class="title"><h2><span class="title">More Information</span></h2></div>
<div class="region"><ul><li class="links "><a href="Gio.Socket.html" title="Gio.Socket">Gio.Socket</a></li></ul></div>
</div></div></div>
</div>
</div>
<div class="clear"></div>
</div>
<div class="footer"></div>
</div></body>
</html>
